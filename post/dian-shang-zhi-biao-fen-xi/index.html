
<!DOCTYPE html>
<html>
  <head>
    
<meta charset="utf-8" >

<title>电商指标分析 | M31星云干货集散地</title>
<meta name="description" content="温故而知新">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://dasein.vercel.app/favicon.ico?v=1597370677599">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://dasein.vercel.app/styles/main.css">


  
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
  

  


<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



  </head>
  <body>
    <div id="app" class="main">
      <div class="site-header-container">
  <div class="site-header">
    <div class="left">
      <a href="https://dasein.vercel.app">
        <img class="avatar" src="https://dasein.vercel.app/images/avatar.png?v=1597370677599" alt="" width="32px" height="32px">
      </a>
      <a href="https://dasein.vercel.app">
        <h1 class="site-title">M31星云干货集散地</h1>
      </a>
    </div>
    <div class="right">
      <transition name="fade">
        <i class="icon" :class="{ 'icon-close-outline': menuVisible, 'icon-menu-outline': !menuVisible }" @click="menuVisible = !menuVisible"></i>
      </transition>
    </div>
  </div>
</div>

<transition name="fade">
  <div class="menu-container" style="display: none;" v-show="menuVisible">
    <div class="menu-list">
      
        
          <a href="/" class="menu purple-link">
            首页
          </a>
        
      
        
          <a href="/archives" class="menu purple-link">
            归档
          </a>
        
      
        
          <a href="/tags" class="menu purple-link">
            标签
          </a>
        
      
        
          <a href="/post/about" class="menu purple-link">
            关于
          </a>
        
      
    </div>
  </div>
</transition>


      <div class="content-container">
        <div class="post-detail">
          
          <h2 class="post-title">电商指标分析</h2>
          <div class="post-info post-detail-info">
            <span><i class="icon-calendar-outline"></i> 2020-08-14</span>
            
          </div>
          <div class="post-content">
            <h1 id="一-数据概况">一、数据概况</h1>
<h2 id="数据来源">数据来源：</h2>
<p><a href="https://tianchi.aliyun.com/dataset/dataDetail?dataId=47&amp;lang=zh-cn">阿里天池</a></p>
<h2 id="数据内容">数据内容：</h2>
<p><img src="https://dasein.vercel.app/post-images/1597366010068.png" alt="" loading="lazy"><br>
<img src="https://dasein.vercel.app/post-images/1597366327443.png" alt="" loading="lazy"><br>
数据集提供了“双十一”期间部分卖家及其相应<strong>新买家</strong>的数据，包括这些新买家在前半年的购物行为日志，以及基本用户信息，所以<strong>数据集提供的用户均在”双十一“期间有购买行为</strong>。</p>
<h1 id="二-提出问题">二、提出问题</h1>
<ul>
<li>
<p>用户方面：</p>
<p>网站流量状况如何，在获客方面是否存在问题？</p>
<p>新用户留存状况，用户忠诚度如何？</p>
<p>获取营收状况？放弃购买的用户在哪个环节流失？</p>
<p>怎样通过用户分层进行精细化运营？</p>
</li>
<li>
<p>商品方面：</p>
<p>哪些商品销量更高？</p>
<p>商品之间是否存在购买的关联性？</p>
</li>
<li>
<p>卖家方面：</p>
<p>成功的卖家有什么特点？是否有值得借鉴之处？</p>
</li>
</ul>
<h1 id="三-分析思路">三、分析思路</h1>
<ul>
<li>使用人货场的分析框架并结合AARRR指标体系。</li>
<li>采用多维度拆解分析方法对问题进行拆解，用假设检验分析法、对比分析法和kmeans模型具体分析用户使用流程及具体业务指标中的问题。<br>
<img src="https://dasein.vercel.app/post-images/1597366576834.png" alt="" loading="lazy"></li>
</ul>
<h1 id="四-数据清理">四、数据清理</h1>
<p>数据清理的步骤：<br>
<img src="https://dasein.vercel.app/post-images/1597366638741.png" alt="" loading="lazy"></p>
<h2 id="1数据加载-合并">1.数据加载、合并</h2>
<p>使用pandas载入数据集：</p>
<pre><code>import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
path_user_info = 'user_info_format1.csv'
path_user_log = 'user_log_format1.csv'
user_info = pd.read_csv(path_user_info)
user_log = pd.read_csv(path_user_log)
</code></pre>
<h3 id="11-查看数据">1.1 查看数据</h3>
<p>分别查看user_info和user_log的内容：</p>
<p>（1）user_info</p>
<pre><code>#查看user_info前五条数据
user_info.head()
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://dasein.vercel.app/post-images/1597367204849.png" alt="" loading="lazy"></figure>
<ul>
<li>
<p>user_info包含了用户的基本信息：</p>
<p>user_id；</p>
<p>age_range: 1 for &lt;18; 2 for [18,24]; 3 for [25,29]; 4 for [30,34]; 5 for [35,39]; 6 for [40,49]; 7 and 8 for &gt;= 50; 0 and NULL for unknown；</p>
<p>gender: 0 for female, 1 for male, 2 and NULL for unknown;</p>
</li>
</ul>
<p>（2）user_log</p>
<pre><code>#查看user_log前五条内容
user_log.head()
</code></pre>
<figure data-type="image" tabindex="2"><img src="https://dasein.vercel.app/post-images/1597367359594.png" alt="" loading="lazy"></figure>
<ul>
<li>
<p>user_log是用户的行为记录：</p>
<p>item_id：商品的编号</p>
<p>cat_id：商品的种类</p>
<p>seller_id：商家的id</p>
<p>brand_id：商品的品牌</p>
<p>time_tamp：行为发生的时间（format:mmdd)</p>
<p>action_type：0表示点击，1表示加入购物车，2表示购买，3表示收藏</p>
</li>
</ul>
<h3 id="12-合并数据">1.2 合并数据</h3>
<p>为了方便分析，将user_info和user_log进行合并：</p>
<pre><code>user_full = pd.merge(user_log,user_info)
user_full.head()
</code></pre>
<figure data-type="image" tabindex="3"><img src="https://dasein.vercel.app/post-images/1597367671985.png" alt="" loading="lazy"></figure>
<pre><code>#查看数据量
user_full.shape
(54925330, 9)
</code></pre>
<h2 id="2缺失值处理">2.缺失值处理</h2>
<h3 id="21-查看缺失值分布">2.1 查看缺失值分布</h3>
<pre><code>#计算缺失值的数量
count_null = user_full.isnull().sum().sort_values(ascending=False)
#缺失值占比
ratio = count_null/len(user_full)
count_ratio = pd.concat([count_null,ratio],axis=1,keys = ['count','ratio'])
count_ratio[count_ratio.ratio&gt;0]
</code></pre>
<p><img src="https://dasein.vercel.app/post-images/1597369373220.png" alt="" loading="lazy"><br>
可见，缺失值的占比较小，且只分布在性别、年龄和品牌三列。</p>
<h3 id="22-填充缺失值">2.2 填充缺失值</h3>
<p>因为数据集里性别未知表示为NaN或2，所以我们将缺失值统一填充为2；同理，将年龄缺失值填充为0。</p>
<pre><code>#填充年龄、性别的缺失值
user_full['age_range'].fillna(0,inplace=True)
user_full['gender'].fillna(2,inplace=True)
#对品牌的缺失值填充‘Missing'    
user_full['brand_id'].fillna('Missing',inplace=True)
user_full.isnull().sum()
user_id        0
item_id        0
cat_id         0
seller_id      0
brand_id       0
time_stamp     0
action_type    0
age_range      0
ender         0
dtype: int64
</code></pre>
<h2 id="3重复值处理">3.重复值处理</h2>
<pre><code>#选择重复的行
count_dup = user_full[user_full.duplicated()]
count_dup.count()
user_id        2498641
item_id        2498641
cat_id         2498641
seller_id      2498641
brand_id       2498641
time_stamp     2498641
action_type    2498641
age_range      2498641
gender         2498641
dtype: int64
</code></pre>
<p>查询发现，数据集有2,498,641行重复数据，这个数字非常大，不能简单的认为是数据的冗余，可能确实是用户重复操作所导致的，对此我们决定予以保留。</p>
<h2 id="4时间格式转换">4.时间格式转换</h2>
<ul>
<li>
<p>将原本的时间戳转换成更直观的形式。</p>
</li>
<li>
<p>拆分出月和日，方便后续的分析。</p>
<p>#引入datetime工具库转换时间格式<br>
import datetime as dtimport datetime<br>
user_full['time_stamp'] = pd.to_datetime(user_full['time_stamp'],format='%Y%m%d')<br>
#拆分月、日<br>
user_full['month'] = user_full['time_stamp'].dt.month.astype(str)<br>
user_full['day'] = user_full['time_stamp'].dt.day.astype(str)<br>
user_full['year'] = '2015'<br>
user_full['date'] = user_full['year'] + user_full['month'] + user_full['day']<br>
user_full['date'] = pd.to_datetime(user_full['date'],format='%Y%m%d')<br>
user_full.drop(['time_stamp'],axis=1,inplace=True)<br>
user_full.head()</p>
</li>
</ul>
<figure data-type="image" tabindex="4"><img src="https://dasein.vercel.app/post-images/1597369687965.png" alt="" loading="lazy"></figure>
<h1 id="五-数据分析">五、数据分析</h1>
<h2 id="1人">1.人</h2>
<p>这一部分关注点是用户的行为习惯，利用AARRR的部分因素、转化率概念和kmeans模型对用户行为进行分析。</p>
<h3 id="acquisition客户获取">Acquisition：客户获取</h3>
<h4 id="指标选取">指标选取</h4>
<figure data-type="image" tabindex="5"><img src="https://dasein.vercel.app/post-images/1597369796598.png" alt="" loading="lazy"></figure>
<ul>
<li>pv：<strong>即Page View，网站浏览量，指页面浏览的次数，用以衡量网站用户访问的网页数量</strong>。用户每次打开一个页面便记录1次PV，多次打开同一页面则浏览量累计</li>
<li>uv：<strong>即Unique Visitor，独立访客数，指一天内访问某站点的人数，以cookie为依据</strong>。1天内同一访客的多次访问只记录为一个访客。</li>
</ul>
<h4 id="指标分析">指标分析</h4>
<p>按月分组：</p>
<pre><code>group_m = user_full.groupby('month')
group_m.get_group(5).head()
</code></pre>
<p><img src="https://dasein.vercel.app/post-images/1597369894505.png" alt="" loading="lazy"><br>
月流量对比分析：</p>
<pre><code>#创建函数计算pv,uv和pv/uv
def volumeFlow(x):
    month = group_m.get_group(x)
    uv = month['user_id'].nunique()
    pv = month[month['action_type']== 0]['action_type'].count()
    return pv,uv,pv/uv

keys = ['May','Jun','Jul','Aug','Sep','Oct','Nov']
values = []
#遍历5—11月并将数据放入列表
for i in range(5,12):
    a = volumeFlow(i)
    values.append(a)

#转化为DataFrame
dictionary = dict(zip(keys, values))
df = pd.DataFrame(dictionary,index=['pv','uv','pv/uv']).astype(int)
df.columns.name = 'Month'
df.index.name = 'indicator'
df
</code></pre>
<p><img src="https://dasein.vercel.app/post-images/1597370169510.png" alt="" loading="lazy"><br>
可视化：</p>
<pre><code>#可视化
pv = df.iloc[0,:].values
uv = df.iloc[1,:].values
pv_uv = df.iloc[2,:].values
x = ['May','Jun','Jul','Aug','Sep','Oct','Nov']

fig,(ax1,ax2,ax3) = plt.subplots(3,1)
ax1.plot(x,pv,'o-')
ax1.set_ylabel('pv')
ax2.plot(x,uv,'.-')
ax2.set_ylabel('uv')
ax3.plot(x,pv_uv)
ax3.set_ylabel('pv/uv')
plt.subplots_adjust(top=0.92, bottom=0.08, left=0.10, right=0.95, hspace=0.25, wspace=0.35)
</code></pre>
<figure data-type="image" tabindex="6"><img src="https://dasein.vercel.app/post-images/1597370253678.png" alt="" loading="lazy"></figure>
<h4 id="分析总结">分析总结</h4>
<p><strong>整体上看，五月到十一月的浏览量呈现出增长的趋势</strong>，增长可归因于两方面：</p>
<ul>
<li>
<p>独立访客(uv)的增加：</p>
<p>原因假设：1）新客增加；2）旧客唤醒；</p>
<p>验证思路：对用户按首次使用日期进行群组分析，区分新旧用户，计算新客的增长情况；按用户的来源渠道进行分组，筛选有效的获新/唤醒渠道。（新旧用户的分析将会在留存率环节展开所以在此不过多表述，而来源渠道分析因为资料不足无法进行，在此只提供思路。）<br>
<img src="https://dasein.vercel.app/post-images/1597370427409.png" alt="" loading="lazy"></p>
</li>
<li>
<p>人均浏览量的增加：</p>
<p>原因假设：网页内容优化、推荐算法提升和优惠活动等</p>
</li>
</ul>
<p><strong>十一月份出现流量峰值</strong>：</p>
<p>原因假设：双十一促销的影响</p>
<p>假设检验：分析对比双十一前后流量的变化，一般而言，促销过后流量会有一定程度的回落。</p>
<p>收集证据：</p>
<pre><code>#抓取11月数据
group_nov = group_m.get_group(11)
group_nov = pd.DataFrame(group_nov)
#查看11月天数分布
group_nov.day.value_counts()
11    1921587
10     531651
9      213696
8      173739
7      156503
6      146463
5      134096
4      130784
3      108929
1      101456
2       99219
12         11
Name: day, dtype: int64
</code></pre>
<p>11月12日的数据量太小，我们将其作为异常值剔除。</p>

          </div>
        </div>

        
          <div class="next-post">
            <a class="purple-link" href="https://dasein.vercel.app/post/di-yi-ci/">
              <h3 class="post-title">
                下一篇：创世纪
              </h3>
            </a>
          </div>
          
      </div>

      
        
          <div id="gitalk-container"></div>
        

        
      

      <div class="site-footer">
  <div class="slogan">温故而知新</div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://dasein.vercel.app/atom.xml" target="_blank">RSS</a>
</div>


    </div>
    <script type="application/javascript">

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>



  
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>

      var gitalk = new Gitalk({
        clientID: '0982df4107afe2144c4e',
        clientSecret: 'ffb126ab84fb8d54acce166e3691efe7468e671d',
        repo: 'dasein',
        owner: 'StDasein',
        admin: ['StDasein'],
        id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
      })

      gitalk.render('gitalk-container')

    </script>
  

  




  </body>
</html>
